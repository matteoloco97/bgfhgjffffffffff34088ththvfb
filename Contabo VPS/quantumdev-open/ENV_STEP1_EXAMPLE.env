# ============================================================================
# STEP 1 - Intent Detection & Memory Integration Environment Variables
# ============================================================================
# Add these to your existing .env file to enable the new features

# -----------------------------------------------------------------------------
# Intent Classification with LLM Fallback
# -----------------------------------------------------------------------------
# Enable LLM-based intent classification when pattern matching is uncertain
LLM_INTENT_ENABLED=0  # Set to 1 to enable LLM fallback (requires llm_intent_classifier module)

# Minimum confidence threshold for accepting LLM intent classification
INTENT_LLM_MIN_CONFIDENCE=0.45

# Maximum number of LLM fallback attempts (for future retry logic)
INTENT_LLM_MAX_FALLBACKS=1

# -----------------------------------------------------------------------------
# Personal Memory System (User Profile + Episodic)
# -----------------------------------------------------------------------------
# Enable user profile memory (stable facts about users)
USER_PROFILE_ENABLED=1  # Recommended: keep enabled for personalized responses

# Enable episodic memory (conversation history summaries)
EPISODIC_MEMORY_ENABLED=1  # Recommended: keep enabled for context continuity

# Number of user profile facts to retrieve and inject into LLM context
MEMORY_PROFILE_TOP_K=5  # Adjust based on typical user profile size

# Number of episodic conversation summaries to retrieve
MEMORY_EPISODIC_TOP_K=3  # Recent conversation context

# Maximum tokens allocated for memory context (profile + episodic combined)
MEMORY_MAX_CONTEXT_TOKENS=800  # Balance with LLM context window size

# -----------------------------------------------------------------------------
# Episodic Memory Buffer Configuration (Already Supported)
# -----------------------------------------------------------------------------
# These variables control when conversation buffers are summarized
# Adjust if you want more/less frequent summarization

# Maximum messages in buffer before summarization
EPISODIC_BUFFER_SIZE=10

# Maximum estimated tokens in buffer before summarization
EPISODIC_BUFFER_TOKEN_LIMIT=2000

# Enable automatic summarization (strongly recommended)
EPISODIC_SUMMARIZE_ENABLED=1

# Maximum age in days for episodic memories (cleanup threshold)
EPISODIC_MAX_AGE_DAYS=90

# -----------------------------------------------------------------------------
# User Profile Configuration (Already Supported)
# -----------------------------------------------------------------------------
# Collection name for user profiles in ChromaDB
USER_PROFILE_COLLECTION=user_profile

# Maximum age in days for user profile facts (cleanup threshold)
USER_PROFILE_MAX_AGE_DAYS=365

# Default user ID (for single-user setups)
DEFAULT_USER_ID=matteo

# ============================================================================
# Recommended Configuration for Production
# ============================================================================
# Copy these settings for optimal performance:
#
# LLM_INTENT_ENABLED=1  # If llm_intent_classifier is available
# INTENT_LLM_MIN_CONFIDENCE=0.50  # Slightly higher for production
# USER_PROFILE_ENABLED=1
# EPISODIC_MEMORY_ENABLED=1
# MEMORY_PROFILE_TOP_K=5
# MEMORY_EPISODIC_TOP_K=3
# MEMORY_MAX_CONTEXT_TOKENS=800
# EPISODIC_BUFFER_SIZE=10
# EPISODIC_BUFFER_TOKEN_LIMIT=2000
# EPISODIC_SUMMARIZE_ENABLED=1

# ============================================================================
# Recommended Configuration for Development/Testing
# ============================================================================
# Copy these settings for testing:
#
# LLM_INTENT_ENABLED=0  # Disable LLM fallback for faster testing
# USER_PROFILE_ENABLED=1
# EPISODIC_MEMORY_ENABLED=1
# MEMORY_PROFILE_TOP_K=3  # Fewer facts for simpler testing
# MEMORY_EPISODIC_TOP_K=2
# MEMORY_MAX_CONTEXT_TOKENS=500  # Smaller context for visibility
# EPISODIC_BUFFER_SIZE=5  # Trigger summarization more frequently
# EPISODIC_BUFFER_TOKEN_LIMIT=1000
# EPISODIC_SUMMARIZE_ENABLED=1
